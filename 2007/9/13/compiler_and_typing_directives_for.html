<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>paperplanes. Compiler and Typing Directives for Ruby?</title>
    <meta name="robots" content="index,follow"/>
    <meta name="mssmarttagspreventparsing" content="true"/>
    <link rel="shortcut icon" href="/images/favicon.gif" type="image/gif" />
    <link rel="icon" href="/images/favicon.gif" type="image/gif" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  	<meta name="author" content="Mathias Meyer"/>
    <meta name="dc.title" content="paperplanes. Compiler and Typing Directives for Ruby?"/>
  	<link rel="start" href="http://www.paperplanes.de" title="paperplanes"/>
     
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="Compiler and Typing Directives for Ruby?"/>
    <meta name="twitter:site" content="@roidrage"/>
    <meta name="twitter:creator" content="@roidrage"/>
    <meta name="twitter:description" content="Ola Bini made an interesting yet somehow unappealing proposal the other day. Ruby should support Lisp-like compiler and typing directives to allow for optimization. One example:
def one_two_three(o..."/>
    <meta name="twitter:url" content="http://www.paperplanes.de/2007/9/13/compiler_and_typing_directives_for.html"/>
    <meta name="twitter:domain" content="paperplanes.de"/>
    
    <link href="http://www.paperplanes.de/rss.xml" rel="alternate" title="Primary Feed" type="application/rss+xml" />
    <link href="/stylesheets/screen.css" media="screen" rel="Stylesheet" title="paperplanes" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/mobile.css" media="handheld, only screen and (max-device-width: 960px)" />
  </head>
  
  <body id="www-paperplanes-de">
    <div id="head">
      <div id="header-content">
        <a href="/">
          <img src="/images/paperplane.png" id="paperplane">
        </a>
        <div id="about">
          <h1 class="default">Hi, I'm Mathias Meyer, nice to meet you!</h1>
          <h1 class="mobile">Hi, I'm <a href="https://twitter.com/roidrage">Mathias Meyer</a>, I'm the CEO at <a href="https://travis-ci.com">Travis CI</a></h1>
          <p style="color: white" class="about-sub-title default">
            I'm the CEO at <a href="http://travis-ci.com">Travis CI</a>. I like coffee, <a href="https://twitter.com/roidrage">Twitter</a> and <a href="mailto:meyer@paperplanes.de">email</a>.
          </p>
        </div>
      </div>
    </div>

    <div id="box">
      <div id="content">
        <article class="hentry">
  <div class="item_perma">
    <div class="item_details">
      <header>
        <h3 class="entry-title">Compiler and Typing Directives for Ruby?</h3>
        <h4><a href="/2007/9/13/compiler_and_typing_directives_for.html" title="Permalink for this post">13 September 2007</a> by <a href="http://twitter.com/roidrage">Mathias Meyer</a></h4>
      </header>
    </div>
    <div class="item_content">
      <p>Ola Bini <a href="http://ola-bini.blogspot.com/2007/09/should-ruby-have-optional-typing-and.html">made an interesting yet somehow unappealing proposal</a> the other day. Ruby should support Lisp-like compiler and typing directives to allow for optimization. One example:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">def one_two_three(one, two, three)
  declare type: [Fixnum one, Array two, Hash three]
  declare return: Fixnum
  do_something
end
</code></pre></div>
<p>I don&#39;t know about you, but this looks highly appalling to me. Imagine these declarations cluttered across your Rails application. Throw in more compiler directives and you got yourself some nicely unreadable code. What immediately popped up into my head was annotated Java code:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">@OneToOne(cascade = CascadeType.ALL)
@JoinColumn(name=&quot;passport_fk&quot;)
public Passport getPassport() {
    ...
}
</code></pre></div>
<p>I know, I know, it&#39;s not the same, but that&#39;s what came to my mind. I&#39;m not a big fan of Java annotations for purposes like this. In my opinion the code gets very unreadable through the overuse of annotations, but maybe that&#39;s just me.</p>

<p>Another thing about the typing directives is the loss of dynamic typing. Dynamic typing is one of the great things about scripting languages. I had several discussions about that matter, and I&#39;m well aware that Java fans love static typing, even though it&#39;s not even used to the fullest extent in Java.</p>

<p>With the above code annotation I&#39;d restrict my methods to accept only a Fixnum, an Array and a Hash. Why bother? To make it easier for the compiler and in return jeopardize readability? To answer Ola&#39;s question: No, I don&#39;t think we need directives, and please don&#39;t try to make Ruby more like Lisp. There are a lot of people who wouldn&#39;t see that as a step forward, I bet. I&#39;m all up for change and for a language to improve evolutionarily, but it&#39;s not a good idea to extent a language with features it wasn&#39;t built for. That already happened to Java.</p>

<p>Static typing is way overrated.</p>

    </div>
    <div class="item_meta">
      <div class="item_tags">Tags:
        
      </div>
      <div class="item_hierarchy">Hierarchy:
        
          <a href="/2007/9/12/write_tests_for_even_the.html" title="Previous post">previous</a>
        
        
        
          , <a href="/2007/9/14/14_09_07_friday_rails_links.html" title="Next post">next</a>
        
        </div>
    </div>
  </div>
</article>

       
        <div id="footer">
          <div id="footer_text">
            <a href="/archives.html">Archives</a>, <a href="http://www.paperplanes.de/rss.xml" title="Full-text RSS feed">RSS Feed</a>, &copy; 2007-2014 Mathias Meyer <a href="/imprint.html">Imprint</a>
          </div>
        </div>
      </div>
    </div>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46305173-1', 'paperplanes.de');
      ga('send', 'pageview');

    </script>
  </body>
  <script src="//my.hellobar.com/7db1d1ae6111ae95568efbbf8e6a1ee953ad854f.js" type="text/javascript" charset="utf-8" async="async"></script>
</html>
